@page "/todo"
@using Beyond.Todo.Application.Models
@using Microsoft.FluentUI.AspNetCore.Components
@using Beyond.Todo.WebApp.Client.Components
@inject HttpClient Http

<PageTitle>Todo List</PageTitle>

<div class="container">
    <h1>Todo List</h1>

    @if (todos == null)
    {
        <FluentProgressRing />
    }
    else
    {
        <div class="todo-grid">
            @foreach (var item in todos)
            {
                <TodoCard Item="@item" />
            }
        </div>
    }
</div>

<style>
    .container {
        padding: 20px;
    }

    .todo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px 0;
    }
</style>

@code {
    private List<TodoItemDto>? todos;

    protected override async Task OnInitializedAsync()
    {
        todos = await Http.GetFromJsonAsync<List<TodoItemDto>>("api/todo") ?? new List<TodoItemDto>();
    }
}
